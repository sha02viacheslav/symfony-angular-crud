<div class="page">
  <div class="page-main">
    <div class="app-content" style="margin-left: 0;">
      <div class="side-app">
        <div class="row">
          <h2 class="order_title">Orders List Table</h2>
        </div>
        <div class="row" *ngIf="filterShow">
          <div class="col-md-12 col-lg-12">
            <div class="card">
              <div class="card-body">
                <div class="row">
                  <div class="col-md-3">
                    <div class="form-group">
                      <label class="form-label">Search</label>
                      <input type="text" class="form-control" placeholder="Search By Customer or Status" minlength="2" maxlength="100"
                      [(ngModel)]="advSearchObj.searchText" #descr="ngModel" name="descr" required>
                    </div>
                  </div>
                  <div class="col-md-6">
                    <div class="form_line_btn">
                      <button type="button" class="btn btn-primary" title="Search" (click)="filterData()"><i
                          class="fa fa-search"></i></button>
                      <button type="button" class="btn btn-danger" (click)="resetFilterData()" title="Reset"><i
                          class="fa fa-refresh"></i></button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col-md-12 col-lg-12">
            <div class="card" style="background-color: green;">
              <div class="card-body">
                <div class="row">
                  <div class="col-sm-12 col-md-6">
                    <div class="dataTables_length">
                      <label>Show</label>
                      <select class="form-control" style="width: 200px;" name="noOfPage" aria-controls="example" [(ngModel)]="noOfPage"
                        (ngModelChange)="p=1">
                        <option value="10">10</option>
                        <option value="25">25</option>
                        <option value="50">50</option>
                        <option value="100">100</option>
                      </select>
                      <label>entries</label>
                    </div>
                  </div>
                  <div class="col-sm-12 col-md-3 offset-3">
                    <div class="dataTables_filter">
                      <i class="fa fa-search"></i>
                      <input type="search" class="form-control form-control-sm" placeholder="Search" (keyup)="p=1"
                        [(ngModel)]="searchObj" name="searchObj" aria-controls="example"></div>
                  </div>
                </div>
                <div class="table-responsive">
                  <table class="table table-dark table-bordered" style="width:100%">
                    <thead class="thead-dark">
                      <tr>
                        <th class="wd-15p text-center">No</th>
                        <th class="wd-15p text-center">Date <i class="fa fa-sort" (click)="sort('date')"></i></th>
                        <th class="wd-15p text-center">Customer </th>
                        <th class="wd-15p text-center">Address </th>
                        <th class="wd-15p text-center">City </th>
                        <th class="wd-15p text-center">Postcode </th>
                        <th class="wd-15p text-center">Country <i class="fa fa-sort" (click)="sort('country')"></i></th>
                        <th class="wd-15p text-center">Amount <i class="fa fa-sort" (click)="sort('amount')"></i></th>
                        <th class="wd-15p text-center">Status </th>
                        <th class="wd-15p text-center">Last Modified <i class="fa fa-sort" (click)="sort('last_modified')"></i></th>
                        <th class="wd-15p text-center">Action</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr
                        *ngFor="let data of recordList | filter : searchObj | orderBy: key: reverse | paginate: { itemsPerPage: noOfPage, currentPage: p } ;let i=index">
                        <td class="text-center">{{ (i + 1) + (p - 1) * noOfPage}}</td>
                        <td class="text-center">{{data?.date | showHypen}}</td>
                        <td class="text-center">{{data?.customer | showHypen}}</td>
                        <td class="text-center">{{data?.address1 | showHypen}}</td>
                        <td class="text-center">{{data?.city | showHypen}}</td>
                        <td class="text-center">{{data?.postcode | showHypen}}</td>
                        <td class="text-center">{{data?.country | showHypen}}</td>
                        <td class="text-center">{{data?.amount | showHypen}}</td>
                        <td class="text-center">{{data?.status | showHypen}}</td>
                        <td class="text-center">{{data?.lastModified | showHypen}}</td>
                        <td class="text-center">
                          <button class="btn btn-danger" title="Cancel" *ngIf="data?.status=='pending'"
                            (click)="toggleStatus(data,'cancelled')">Cancel</button>
                        </td>
                      </tr>
                      <tr *ngIf="!recordList.length" class="text-center">
                        <td colspan="20">No Records Available</td>
                      </tr>
                      <tr class="pagination_area">
                        <td colspan="20">
                          <pagination-controls (pageChange)="p = $event"></pagination-controls>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <app-change-status-modal [changeData]="recordObj" (changeStatusConfirmed)="changeStatus($event)">
    </app-change-status-modal>

  </div>
